<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MARKER</title>
<!-- Fonts -->
<link rel="preload" href="./assets/fonts/Presicav.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="./assets/fonts/Calibre-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="./assets/fonts/Arial.woff2" as="font" type="font/woff2" crossorigin="anonymous">

<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700;900&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
<link href="https://api.fontshare.com/v2/css?f[]=neue-montreal@500&display=swap" rel="stylesheet">

<!-- Libraries -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/velocity/1.2.3/velocity.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/velocity/1.2.3/velocity.ui.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

<script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>

<script src="https://unpkg.com/lenis@1.1.20/dist/lenis.min.js"></script>

<!-- App -->
<script type="module" crossorigin src="./js/index.min.js?v=1754734869502"></script>
<link rel="stylesheet" crossorigin href="./css/index.min.css?v=1754734869502">

    <style>
        /* =========================================
           GLOBAL & ANIMATIONS
           ========================================= */
        @keyframes stroke {
            from {
                stroke-dashoffset: 5414.29;
            }

            to {
                stroke-dashoffset: 0;
            }
        }

        @keyframes reveal {
            from {
                clip-path: polygon(0 100%, 100% 100%, 100% 100%, 0% 100%);
                opacity: 0;
            }
        }

        @keyframes scaleIn {
            from {
                opacity: 0;
                scale: .2;
            }
        }

        @keyframes revealText {
            from {
                clip-path: polygon(0 0, 0% 0, 0% 100%, 0 100%);
            }
        }

        html {
            background-color: rgb(255, 255, 255);
        }

        body {
            margin: 0;
            overflow-x: hidden;
            overscroll-behavior: none;
        }

        body.is-loading {
            overflow: hidden;
            height: 100vh;
        }

        /* =========================================
           GLOBAL CURSOR STYLES
           ========================================= */
        #global-cursor-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 10000;
            pointer-events: none;
            mix-blend-mode: difference;
        }

        /* =========================================
           3D MARKER CANVAS STYLES
           ========================================= */
        /* =========================================
   3D MARKER CANVAS STYLES (DESKTOP DEFAULT)
   ========================================= */
        #marker-3d-canvas {
            position: fixed;
            top: 50%;
            /* Vertically center */
            right: -5vw;
            /* Position on right (slightly off-screen for style) */
            transform: translateY(-50%);
            /* Center alignment adjustment */

            /* Desktop Size */
            width: 80vh;
            height: 80vh;

            /* Layering */
            z-index: 5;
            /* Behind text, above video */
            pointer-events: none;
            background: transparent;
            transition: opacity 0.1s linear;
        }

        @media (max-width: 768px) {
            /* ... existing mobile styles ... */

            /* 3D Model: Move to bottom right and shrink for mobile */
            #marker-3d-canvas {
                width: 50vh !important;
                /* Smaller size for phone */
                height: 50vh !important;

                top: auto;
                /* Unset vertical centering */
                bottom: 5vh;
                /* Align to bottom */
                /* Push further right to not block text */
                transform: none;
                /* Remove the desktop centering transform */
            }
        }

        .page-header {
            align-items: center;
            display: flex;
            height: 100vh;
            justify-content: center;
            background: transparent;
        }

        .page-header h1 {
            color: white;
            font-size: 3rem;
        }

        /* =========================================
           LOADER STYLES
           ========================================= */
        .loader-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #f4f4f4;
            z-index: 9999;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            font-family: 'Neue Montreal', sans-serif;
        }

        .loader-content {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            height: 100%;
            position: relative;
        }

        .willem__h1 {
            white-space: nowrap;
            justify-content: center;
            font-size: clamp(3rem, 12vw, 12.5em);
            font-weight: 500;
            line-height: .75;
            display: flex;
            position: relative;
            color: #201d1d;
        }

        .willem__h1-start,
        .willem__h1-end {
            display: flex;
            overflow: hidden;
        }

        .willem__h1-start {
            justify-content: flex-end;
            width: auto;
        }

        .willem__h1-end {
            justify-content: flex-start;
            width: auto;
        }

        .willem__letter {
            display: block;
            position: relative;
        }

        .willem-loader__box {
            flex-flow: column;
            justify-content: center;
            align-items: center;
            width: 0;
            display: flex;
            position: relative;
            margin: 0 0.1em;
        }

        .willem-loader__box-inner {
            justify-content: center;
            align-items: center;
            min-width: 1em;
            height: 95%;
            display: flex;
            position: relative;
        }

        .willem__growing-image {
            justify-content: center;
            align-items: center;
            width: 0%;
            height: 100%;
            display: flex;
            position: absolute;
            overflow: hidden;
        }

        .willem__growing-image-wrap {
            width: 100%;
            min-width: 1em;
            height: 100%;
            position: absolute;
        }

        .willem__cover-image,
        .willem__cover-image-extra {
            pointer-events: none;
            object-fit: cover;
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
        }

        .willem__cover-image-extra.is--1 {
            z-index: 3;
        }

        .willem__cover-image-extra.is--2 {
            z-index: 2;
        }

        .willem__cover-image-extra.is--3 {
            z-index: 1;
        }

        /* =========================================
           SECTION 2: URBANIST STYLES
           ========================================= */
        :root {
            --theme-main-bg: #b9dcff;
            --theme-sub-bg: #f2fbfe;
            --theme-text: #070f36;
            --theme-title: #8dc9f4;
            --font-sans: "Urbanist", sans-serif;
        }

        #urbanist-integration {
            position: relative;
            width: 100%;
            height: 100vh;
            overflow: hidden;
            font-family: var(--font-sans);
            color: var(--theme-text);
            isolation: isolate;
            z-index: 20;
            background: white;
        }

        #urbanist-integration .urbanist-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            object-fit: cover;
        }

        #urbanist-integration .content-layer {
            position: absolute;
            inset: 0;
            padding-inline: min(10vw, 100px);
            z-index: 1;
            pointer-events: none;
        }

        #urbanist-integration h1 {
            font-size: clamp(10vw, 250px, 20vw);
            color: var(--theme-title);
            margin: 0;
            line-height: 1;
        }

        #urbanist-integration p {
            width: clamp(5vw, 250px, 80vw);
            font-size: clamp(1vw, 12px, 1.5vw);
            font-weight: 600;
            text-wrap: balance;
            color: var(--theme-text);
            line-height: 1.3;
        }

        #urbanist-integration .desc-1 {
            margin-top: 2rem;
        }

        #urbanist-integration .desc-2 {
            position: absolute;
            bottom: 5vh;
            left: min(40vw, 300px);
        }

        #urbanist-integration .desc-3 {
            position: absolute;
            top: 50%;
            right: 10vw;
        }

        #panes-container {
            width: 300vw;
            display: flex;
            height: 100%;
        }

        .pane {
            position: relative;
            height: 100%;
            width: 100vw;
        }

        .urbanist-floating-img {
            position: absolute;
            right: 0;
            top: 50%;
            width: max(20vw, 400px);
            translate: -100% 0;
            border-radius: 12px;
            display: block;
        }

        .pane:nth-of-type(2) .urbanist-floating-img {
            aspect-ratio: 1/1;
            object-fit: cover;
            translate: -200% -70%;
            width: max(15vw, 300px);
        }

        .pane:nth-of-type(3) .urbanist-floating-img {
            translate: -150% -50%;
        }

        /* =========================================
           SECTION 3: HISTORY STYLES
           ========================================= */
        #scroll-section {
            container: inline-size;
            display: grid;
            position: relative;
            min-height: 1800px;
            padding-block-start: 15vh;
            font-family: 'Montserrat', sans-serif;
            background: transparent;
            z-index: 10;
        }

        #scroll-section img {
            clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%);
            display: block;
            height: auto;
            max-width: 100%;
            animation: reveal linear both;
            animation-timeline: view();
            animation-range: 10% 60%;
        }

        #scroll-section .btn {
            background-color: rgb(21, 21, 21);
            border-radius: 99px;
            color: white;
            display: block;
            font-size: 18px;
            font-weight: 900;
            letter-spacing: .02em;
            line-height: 42px;
            height: 42px;
            padding: 0 40px;
            text-decoration: none;
            transition: background-color .4s ease-out;
            width: fit-content;
        }

        #scroll-section .btn:hover {
            background-color: rgb(243, 87, 87);
        }

        .line-svg {
            grid-row: 1;
            grid-column: 1;
            height: calc(100% - 10rem);
            top: 25cqb;
            min-width: 300px;
            z-index: 1;
            pointer-events: none;
        }

        .anim-overview-stroke {
            stroke-dasharray: 5414.29;
            stroke-dashoffset: 5414.29;
            animation: stroke linear forwards;
            animation-timeline: view();
            animation-range: cover 0% cover 75%;
        }

        .container {
            grid-column: 1;
            grid-row: 1;
            margin: 0 auto;
            max-width: 1272px;
            z-index: 2;
        }

        #scroll-section h2 {
            clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%);
            color: #333;
            font-size: 62px;
            font-weight: 900;
            letter-spacing: .02em;
            margin: 0;
            padding-top: 72px;
            position: relative;
            width: 50%;
            text-align: right;
            animation: revealText linear both;
            animation-timeline: view();
            animation-range: 25% 60%;
        }

        .layout-container {
            padding-top: 8rem;
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 20px;
        }

        .box {
            background-color: rgb(255, 239, 239);
            color: #333;
            padding: 4rem;
            opacity: 1;
            scale: 1;
            animation: scaleIn linear both;
            animation-timeline: view();
            animation-range: 0% 40vh;
        }

        .box h3 {
            font-size: 42px;
            font-weight: 900;
            line-height: 1.1;
            margin: 0 0 18px;
        }

        .box p {
            font-size: 18px;
            line-height: 1.25;
            margin: 0 0 2em;
        }

        .box-1 {
            grid-column: 3 / span 3;
            grid-row: span 2;
        }

        .image-1 {
            grid-column: 1 / span 2;
            grid-row: 2 / span 2;
            margin-top: 100px;
        }

        .image-2 {
            align-self: end;
            grid-column: 6 / span 1;
            grid-row: 5;
        }

        .image-3 {
            grid-column: 1 / span 2;
            justify-self: end;
            margin-top: 3rem;
        }

        .box-2 {
            grid-column: 2 / span 3;
            margin-top: 3rem;
            grid-row: span 2;
        }

        .box-3 {
            grid-column: 3 / span 3;
            margin-top: 8em;
        }

        .box-4 {
            grid-column: 1 / span 3;
            margin-top: 12rem;
            margin-bottom: -5rem;
        }

        .bottom-spacer {
            height: 10vh;
        }

        /* =========================================
           SECTION 4: PERSPECTIVE ZOOM STYLES
           ========================================= */
        #perspective-wrap {
            background-color: #1f1f1f;
            color: #ffffff;
            font-family: "Roboto", sans-serif;
            position: relative;
            z-index: 30;
        }

        .zoom-container {
            height: 100vh;
            width: 100%;
            overflow: hidden;
            position: relative;
            perspective: 100vh;
            transform-style: preserve-3d;
            background-color: #1f1f1f;
        }

        .heading-zoom {
            font-size: clamp(3rem, 5vw, 6rem);
            line-height: 1.1;
            text-align: center;
            opacity: 0;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) translateZ(-2000px);
            white-space: nowrap;
            z-index: 10;
            pointer-events: none;
            font-weight: 900;
            text-transform: uppercase;
            color: white;
        }

        .zoom-item {
            position: absolute;
            transform-style: preserve-3d;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        .zoom-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }

        .zoom-item:nth-child(2) {
            left: 15vw;
            top: 21%;
            width: 15vw;
        }

        .zoom-item:nth-child(3) {
            left: 29%;
            top: 15%;
            width: 12vw;
        }

        .zoom-item:nth-child(4) {
            left: 36%;
            top: 3%;
            width: 15vw;
        }

        .zoom-item:nth-child(5) {
            right: 30%;
            top: 11%;
            width: 10vw;
        }

        .zoom-item:nth-child(6) {
            right: 7%;
            top: 28%;
            width: 18vw;
        }

        .zoom-item:nth-child(7) {
            bottom: 32%;
            right: 3.5%;
            width: 8vw;
        }

        .zoom-item:nth-child(8) {
            bottom: 13.5%;
            left: 16%;
            width: 14vw;
        }

        .zoom-item:nth-child(9) {
            bottom: 24%;
            left: 29%;
            width: 9vw;
        }

        .zoom-item:nth-child(10) {
            bottom: 46%;
            left: 7.5%;
            width: 8vw;
        }

        .zoom-item:nth-child(11) {
            bottom: 5.5%;
            right: 15%;
            width: 18vw;
        }

        .zoom-item:nth-child(12) {
            bottom: 10.5%;
            right: 38%;
            width: 12vw;
        }

        .zoom-item:nth-child(13) {
            right: 4%;
            top: 5%;
            width: 9vw;
        }

        .section-stick {
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: black;
            color: white;
            position: relative;
            z-index: 50;
        }

        .reveal-text-style {
            font-size: 3rem;
            text-align: center;
            width: 80%;
            font-weight: 700;
            line-height: 1.25;
            color: white;
        }

        @media (min-width: 768px) {
            .reveal-text-style {
                font-size: 4.5rem;
            }
        }

        .opacity-reveal {
            opacity: 0.2;
        }

        .opacity-reveal span {
            transition: opacity 0.1s;
        }

        .spacer-black {
            height: 50vh;
            background: #000;
        }

        /* =========================================
           SECTION 5: ALICE INTEGRATION STYLES
           ========================================= */
        #alice-wrapper {
            --font-open-sans: "Open Sans", serif;
            --color-white: hsla(0, 0%, 100%, 1);
            --color-black: hsla(0, 0%, 0%, 1);
            font-family: var(--font-open-sans);
            font-size: 1rem;
            line-height: 1.75;
            background-color: var(--color-white);
            color: var(--color-black);
            position: relative;
            z-index: 60;
        }

        #alice-wrapper .intro {
            align-items: center;
            display: flex;
            justify-content: center;
            min-height: 100vh;
        }

        #alice-wrapper .intro__heading {
            font-size: clamp(1.875rem, 8.083vw + -0.217rem, 6.25rem);
            line-height: clamp(2.813rem, 9.815vw + 0.273rem, 8.125rem);
            text-align: center;
            margin: 0;
        }

        #alice-wrapper .content {
            background-color: white;
            display: flex;
            justify-content: center;
            position: relative;
            z-index: 1;
            padding: 6.25rem 0;
        }

        #alice-wrapper .article {
            max-width: 31.25rem;
            padding: 0 1.5rem;
        }

        #alice-wrapper .hero-reveal {
            background-color: var(--color-black);
            position: relative;
            min-height: 100vh;
            overflow: hidden;
        }

        #alice-wrapper .hero-reveal__header {
            align-items: center;
            background-color: var(--color-white);
            color: var(--color-black);
            display: flex;
            font-size: clamp(3.125rem, 12.61vw + -0.138rem, 15.625rem);
            line-height: clamp(4.688rem, 15.763vw + 0.609rem, 20.313rem);
            font-weight: 900;
            justify-content: center;
            left: 0;
            min-height: 100vh;
            position: relative;
            top: 0;
            will-change: transform, clip-path;
            z-index: 1;
            width: 100%;
        }

        #alice-wrapper .hero-reveal_split {
            align-items: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
            position: relative;
            width: 100%;
            height: 100%;
        }

        #alice-wrapper .hero-reveal_split_item {
            align-items: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
            min-height: 100vh;
            width: 100%;
            margin: 0;
        }

        #alice-wrapper .hero-reveal_split_item p {
            margin: 0;
        }

        #alice-wrapper .hero-reveal_split_item:nth-child(1) {
            clip-path: inset(0 0 50% 0);
        }

        #alice-wrapper .hero-reveal_split_item:nth-child(2) {
            clip-path: inset(50% 0 0 0);
            left: 0;
            position: absolute;
            top: 0;
        }

        #alice-wrapper .hero-reveal__content {
            color: var(--color-white);
            display: flex;
            justify-content: center;
            padding: 0;
            position: relative;
            margin-top: -60vh;
            pointer-events: none;
        }

        #alice-wrapper .hero-reveal__content-inner {
            max-width: 31.25rem;
            position: relative;
            padding: 0 1.5rem;
        }

        #alice-wrapper .hero-reveal__content-p {
            padding-bottom: 8rem;
            position: relative;
            z-index: 2;
        }

        #alice-wrapper .hero-reveal__parallax {
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            height: 100%;
            z-index: 0;
            pointer-events: none;
        }

        #alice-wrapper .hero-reveal__parallax img {
            position: absolute;
            will-change: transform;
        }

        #alice-wrapper .hero-reveal__parallax-clock {
            left: -6rem;
            top: -25rem;
        }

        #alice-wrapper .hero-reveal__parallax-book {
            left: -12.5rem;
            top: -25rem;
        }

        #alice-wrapper .hero-reveal__parallax-alice {
            left: 50%;
            transform: translateX(-50%);
            top: -31.25rem;
            max-width: 200px;
        }

        #alice-wrapper .hero-reveal__parallax-kattle {
            left: 31.25rem;
            filter: blur(2px);
            top: -18.75rem;
        }

        #alice-wrapper .hero-reveal__parallax-card {
            left: 25rem;
            filter: blur(2px);
            z-index: 1;
            top: -25rem;
        }

        /* =========================================
           LOGO STYLES
           ========================================= */
        .header__menu h1.logo {
            margin: 0;
            line-height: 1;
        }

        .header__menu h1.logo a {
            font-family: 'Roboto', sans-serif;
            font-weight: 900;
            font-size: 2.25rem;
            color: white;
            text-decoration: none;
            letter-spacing: -0.04em;
            text-transform: uppercase;
            display: inline-block;
            transition: color 0.3s ease, transform 0.3s ease;
        }

        .header__menu h1.logo a:hover {
            color: var(--theme-title, #e0e0e0);
        }

        /* =========================================
           SECTION 6: CAROUSEL STYLES
           ========================================= */
        #carousel-section {
            position: relative;
            width: 100vw;
            height: 100vh;
            overflow: hidden;
            background: rgb(211, 216, 203);
            z-index: 70;
        }

        #carousel-section .slider {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        #carousel-section .slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 1;
            background: #dbdbdb;
            overflow: hidden;
            will-change: clip-path;
        }

        #slide-1 {
            z-index: 1;
            clip-path: polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%);
        }

        #slide-2 {
            z-index: 2;
            clip-path: polygon(0% 100%, 100% 100%, 100% 100%, 0% 100%);
        }

        #slide-3 {
            z-index: 3;
            clip-path: polygon(0% 100%, 100% 100%, 100% 100%, 0% 100%);
        }

        #slide-4 {
            z-index: 4;
            clip-path: polygon(0% 100%, 100% 100%, 100% 100%, 0% 100%);
        }

        #carousel-section .slide.dark {
            background: #0c0c0c;
        }

        #carousel-section .slide.light {
            background: #dbdbdb;
        }

        #carousel-section .slide-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            z-index: 10;
            pointer-events: none;
        }

        #carousel-section .slide-content h1 {
            font-family: 'Roboto', sans-serif;
            font-size: 15vw;
            text-transform: uppercase;
            font-weight: 900;
            color: #000;
            margin: 0;
            line-height: 0.9;
        }

        #carousel-section .slide.dark .slide-content h1 {
            color: #dbdbdb;
        }

        #carousel-section .slide-img {
            position: absolute;
            width: 250px;
            height: 150vh;
            filter: saturate(0);
        }

        #carousel-section .slide-img img {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 250px;
            height: 600px;
            object-fit: cover;
        }

        #carousel-section .slide-img-1 {
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(-20deg);
        }

        #carousel-section .slide-img-2 {
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(20deg);
        }

        .scroll-hint {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            font-family: 'Urbanist', sans-serif;
            color: #888;
            font-size: 0.8rem;
            z-index: 20;
            pointer-events: none;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        /* =========================================
           SECTION 7: LIQUID BACKGROUND STYLES
           ========================================= */
        #liquid-section {
            position: relative;
            width: 100vw;
            height: 100vh;
            overflow: hidden;
            background-color: #000;
            z-index: 80;
        }

        #liquid-canvas {
            width: 100%;
            height: 100%;
            display: block;
        }

        .liquid-overlay {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 10;
            pointer-events: auto;
        }

        .liquid-overlay a {
            color: #fff;
            text-decoration: none;
            text-shadow: 1px 1px 2px black;
            font-family: 'Montserrat', sans-serif;
        }

        /* =========================================
           SECTION 8: ADVANCED FOOTER STYLES
           ========================================= */
        #advanced-footer {
            position: relative;
            width: 100vw;
            height: 100vh;
            background-color: #050505;
            color: white;
            z-index: 90;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Neue Montreal', sans-serif;
        }

        #footer-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            pointer-events: none;
        }

        .footer-content {
            position: relative;
            z-index: 2;
            width: 100%;
            max-width: 1400px;
            padding: 0 4vw;
            display: grid;
            grid-template-columns: 1fr 1fr;
            height: 100%;
            align-content: center;
        }

        .footer-left {
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            height: 60vh;
        }

        .footer-big-text {
            font-size: 12vw;
            line-height: 0.8;
            font-weight: 500;
            margin: 0;
            letter-spacing: -0.04em;
            text-transform: uppercase;
            opacity: 0;
            transform: translateY(50px);
        }

        .footer-right {
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: flex-end;
            text-align: right;
            height: 60vh;
            font-size: 1.25rem;
        }

        .footer-links {
            display: flex;
            gap: 4rem;
        }

        .footer-links ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .footer-links li {
            margin-bottom: 0.5rem;
            overflow: hidden;
        }

        .footer-links a {
            color: #888;
            text-decoration: none;
            display: inline-block;
            transition: color 0.3s, transform 0.3s;
            transform: translateY(100%);
        }

        .footer-links a:hover {
            color: #fff;
            transform: translateX(-10px);
        }

        .footer-bottom {
            display: flex;
            justify-content: space-between;
            width: 100%;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            padding-top: 2rem;
            margin-top: auto;
            grid-column: span 2;
            opacity: 0;
        }

        .hero__title {
            /* font-family: 'Roboto', sans-serif; */
            font-family: 'Urbanist', sans-serif;
            font-size: 5vh;
            margin-bottom: 70px;
            width: 50%;


        }

        /* =========================================
           RESPONSIVE MEDIA QUERIES (NEW ADDITION)
           ========================================= */

        @media (max-width: 1024px) {
            #scroll-section h2 {
                width: 80%;
                font-size: 48px;
            }

            .container {
                padding: 0 2rem;
            }
        }

        @media (max-width: 768px) {

            .hero__title,
            .hero__title span {
                font-size: 14vw !important;
            }

            .header__menu h1.logo a {
                font-size: 1.5rem;
            }

            #scroll-section {
                padding-block-start: 5vh;
            }

            .line-svg {
                display: none;
            }

            .layout-container {
                display: flex;
                flex-direction: column;
                gap: 40px;
                padding-top: 4rem;
            }

            .box-1,
            .box-2,
            .box-3,
            .box-4,
            .image-1,
            .image-2,
            .image-3 {
                grid-column: auto;
                grid-row: auto;
                margin: 0 !important;
                width: 100%;
                box-sizing: border-box;
            }

            .image-2,
            .image-3 {
                justify-self: center;
                align-self: center;
            }

            #scroll-section h2 {
                width: 100%;
                text-align: center;
                font-size: 36px;
                padding-top: 20px;
            }

            .box {
                padding: 2rem;
            }

            .box h3 {
                font-size: 32px;
            }

            #urbanist-integration .content-layer {
                padding-inline: 5vw;
                display: flex;
                flex-direction: column;
                justify-content: center;
            }

            #urbanist-integration h1 {
                font-size: 18vw;
            }

            #urbanist-integration p {
                width: 90vw;
                font-size: 16px;
            }

            #urbanist-integration .desc-2,
            #urbanist-integration .desc-3 {
                position: relative;
                bottom: auto;
                left: auto;
                right: auto;
                top: auto;
                margin-top: 1.5rem;
            }

            .urbanist-floating-img {
                width: 50vw;
                top: 75%;
                left: 50%;
                right: auto;
                translate: -50% -50% !important;
            }

            .pane:nth-of-type(2) .urbanist-floating-img,
            .pane:nth-of-type(3) .urbanist-floating-img {
                translate: -50% -50% !important;
            }

            .heading-zoom {
                font-size: 3rem;
            }

            .zoom-container {
                background-color: white;
            }

            .zoom-item {
                width: 40vw !important;
                max-height: 30vh;
            }

            .zoom-item:nth-child(2) {
                left: 5%;
                top: 15%;
            }

            .zoom-item:nth-child(3) {
                left: 55%;
                top: 10%;
            }

            .zoom-item:nth-child(4) {
                left: 10%;
                top: 60%;
            }

            .zoom-item:nth-child(5) {
                right: 5%;
                top: 40%;
            }

            .zoom-item:nth-child(6) {
                right: 50%;
                top: 80%;
            }

            .reveal-text-style {
                font-size: 1.8rem;
                width: 90%;
            }

            .section-stick {
                margin-bottom: -1100px;
            }

            #carousel-section .slide-content h1 {
                font-size: 20vw;
            }

            #carousel-section .slide-img {
                width: 200px;
                height: 100vh;
            }

            #carousel-section .slide-img img {
                width: 200px;
                height: 400px;
            }

            .footer-content {
                grid-template-columns: 1fr;
                gap: 2rem;
                padding-top: 2rem;
            }

            .footer-left {
                height: auto;
                text-align: center;
                align-items: center;
            }

            .footer-right {
                height: auto;
                align-items: center;
                text-align: center;
            }

            .footer-big-text {
                font-size: 18vw;
            }

            .footer-links {
                flex-direction: column;
                gap: 2rem;
                margin-top: 2rem;
            }

            .footer-bottom {
                flex-direction: column;
                gap: 1rem;
                text-align: center;
                padding-bottom: 2rem;
            }

            #alice-wrapper .intro__heading {
                font-size: 3rem;
            }

            #alice-wrapper .hero-reveal__header {
                font-size: 4rem;
            }

            /* Responsive Marker Adjustment */
            #marker-3d-canvas {
                width: 60vh;
                height: 60vh;
                right: -10vw;
                /* Push slightly off screen for mobile */
                top: 60%;
                /* Lower it slightly */
            }
        }

        @import url("https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,100..1000;1,9..40,100..1000&family=Host+Grotesk:ital,wght@0,300..800;1,300..800&display=swap");

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        .viewport-section {
            position: relative;
            width: 100vw;
            height: 100svh;
            padding: 2em;
            overflow: hidden;
        }

        .content-wrapper {
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            border-radius: 2rem;
        }

        .content-wrapper h1 {
            width: 70%;
            color: #121212;
            font-size: 5rem;
            font-weight: 900;
            line-height: 1;
        }

        /* --- Section Specific Colors --- */

        /* Intro (Previously Hero) - New Color: Electric Violet */
        .intro-viewport .content-wrapper {
            background: #fe6d38;
        }

        /* Action Zone (Previously CTA) - New Color: Neon Cyan */
        .action-trigger-zone .content-wrapper {
            background: #c6fe69;
            color: #050511;
            /* Dark text for contrast */
        }

        .action-trigger-zone .content-wrapper h1 {
            color: #050511;
        }

        /* Conclusion (Previously Outro) - New Color: Hot Pink */
        .conclusion-viewport .content-wrapper {
            background: #7a78ff;
        }

        /* Narrative & Capabilities Borders */
        .narrative-segment .content-wrapper,
        .capabilities-segment .content-wrapper {
            border: 0.15rem dashed rgba(100, 100, 120, 0.5);
        }

        /* --- Typography & Animation Styles --- */

        .kinetic-typography-block {
            width: 60%;
        }

        .kinetic-typography-block p {
            color: #121212;
            text-align: center;
            margin-bottom: 2rem;
            font-size: 2rem;
            font-weight: 900;
            line-height: 1;
        }

        .kinetic-typography-block .token-unit {
            display: inline-block;
            position: relative;
            margin-right: 0.2rem;
            margin-bottom: 0.2rem;
            padding: 0.1rem 0.2rem;
            border-radius: 2rem;
            will-change: background-color, opacity;
        }

        .kinetic-typography-block .token-unit.highlight-anchor {
            margin: 0 0.4rem 0.2rem 0.2rem;
        }

        .kinetic-typography-block .token-unit span {
            position: relative;
        }

        /* Highlighters */
        .kinetic-typography-block .token-unit span.emphasis-pill {
            border-radius: 2rem;
            display: inline-block;
            width: 100%;
            height: 100%;
            padding: 0.1rem 0;
            color: #ffffff;
        }

        .kinetic-typography-block .token-unit span.emphasis-pill::before {
            content: "";
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: calc(100% + 1rem);
            height: calc(100% + 0.4rem);
            background-color: #fff;
            border-radius: 2rem;
            z-index: -1;
        }

        /* Group 1: Electric Violet Fill */
        .kinetic-typography-block .token-unit span.emphasis-pill.designed::before,
        .kinetic-typography-block .token-unit span.emphasis-pill.smooth::before,
        .kinetic-typography-block .token-unit span.emphasis-pill.control::before {
            background-color: #7a78ff;
        }

        /* Group 2: Hot Pink Fill */
        .kinetic-typography-block .token-unit span.emphasis-pill.ideas::before,
        .kinetic-typography-block .token-unit span.emphasis-pill.natural::before,
        .kinetic-typography-block .token-unit span.emphasis-pill.performance::before {
            background-color: #fe6d38;
        }

        /* Group 3: Neon Cyan Fill */
        .kinetic-typography-block .token-unit span.emphasis-pill.creation::before,
        .kinetic-typography-block .token-unit span.emphasis-pill.attention::before,
        .kinetic-typography-block .token-unit span.emphasis-pill.value::before {
            background-color: #c6fe69;
        }

        /* Initial State */
        .kinetic-typography-block .token-unit,
        .kinetic-typography-block .token-unit span {
            opacity: 0;
        }

        @media (max-width: 1000px) {
            .content-wrapper h1 {
                width: 90%;
                font-size: 2rem;
            }

            .kinetic-typography-block {
                width: 90%;
            }

            .kinetic-typography-block p {
                font-size: 1.25rem;
            }

            .kinetic-typography-block .token-unit {
                margin-right: 0.1rem;
                margin-bottom: 0.15rem;
                padding: 0.1rem 0.2rem;
            }

            .kinetic-typography-block .token-unit.highlight-anchor {
                margin: 0 0.2rem 0.1rem 0.1rem;
            }
        }

        /* =========================================
   NEW SECTION 4: GRID SCROLL STYLES (EXACT MATCH)
   ========================================= */
        #grid-scroll-wrapper {
            position: relative;
            z-index: 30;
            background-color: #ffffff;
            width: 100%;
        }

        .gs-track {
            min-height: 250vh;
            /* Determines scroll length */
            position: relative;
        }

        .gs-content {
            height: 100vh;
            width: 100%;
            position: sticky;
            top: 0;
            overflow: hidden;
            background: #ffffff;
            display: flex;
            place-items: center;
            align-content: center;
        }

        /* Heading Style */
        .gs-heading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-family: 'Roboto', sans-serif;

            font-weight: 900;
            font-size: clamp(3rem, 12vw, 10rem);
            /* Matches the fluid typography feel */
            color: #1f1f1f;
            z-index: 1;
            /* Behind the images */
            text-align: center;
            margin: 0;
            text-transform: uppercase;
            line-height: 1;
            white-space: nowrap;
        }

        /* The Grid Container */
        .gs-grid {
            --gs-offset: 0;
            --gs-container-width: 1600px;
            /* Exact gap logic from reference */
            --gs-gap: clamp(10px, 7.35vw, 80px);

            width: var(--gs-container-width);
            max-width: calc(100% - 4rem);
            display: grid;
            /* 5 columns, 3 rows */
            grid-template-columns: repeat(5, 1fr);
            grid-template-rows: repeat(3, auto);
            gap: var(--gs-gap);
            margin: 0 auto;
            align-content: center;
            position: absolute;
            top: 50%;
            left: 50%;
            translate: -50% -50%;
            z-index: 2;
        }

        /* Images Style - Exact Match */
        .gs-grid img {
            width: 100%;
            aspect-ratio: 4 / 5;
            /* Exact aspect ratio */
            object-fit: cover;
            border-radius: 1rem;
            /* Exact border radius */
            display: block;
        }

        /* Layers using subgrid */
        .gs-grid>.gs-layer {
            display: grid;
            grid-column: 1 / -1;
            grid-row: 1 / -1;
            grid-template-columns: subgrid;
            grid-template-rows: subgrid;
        }

        /* Layer 1: Outer edges */
        .gs-grid>.gs-layer:nth-of-type(1) div:nth-of-type(odd) {
            grid-column: 1;
        }

        .gs-grid>.gs-layer:nth-of-type(1) div:nth-of-type(even) {
            grid-column: -2;
        }

        /* Layer 2: Inner columns */
        .gs-grid>.gs-layer:nth-of-type(2) div:nth-of-type(odd) {
            grid-column: calc(2 + var(--gs-offset));
        }

        .gs-grid>.gs-layer:nth-of-type(2) div:nth-of-type(even) {
            grid-column: calc(-3 - var(--gs-offset));
        }

        /* Layer 3: Center column top and bottom */
        .gs-grid>.gs-layer:nth-of-type(3) div:first-of-type {
            grid-column: calc(3 + var(--gs-offset));
            grid-row: 1;
        }

        .gs-grid>.gs-layer:nth-of-type(3) div:last-of-type {
            grid-column: calc(3 + var(--gs-offset));
            grid-row: -1;
        }

        /* Center Scaler Image */
        .gs-scaler {
            position: relative;
            grid-area: 2 / calc(3 + var(--gs-offset));
            z-index: 2;
            width: 100%;
            height: 100%;
        }

        .gs-scaler img {
            position: absolute;
            top: 50%;
            left: 50%;
            translate: -50% -50%;
            object-fit: cover;
            border-radius: 1rem;
            width: 100%;
            height: 100%;
        }

        /* Exact Mobile Logic */
        @media (max-width: 600px) {
            .gs-grid {
                grid-template-columns: repeat(3, 1fr);
                --gs-offset: -1;
            }

            .gs-grid>.gs-layer:nth-of-type(1) {
                display: none;
            }
        }

        /* =========================================
   NEW SECTION 2: WEBGL SLIDER STYLES
   ========================================= */
        .slider {
            position: absolute;
            left: 0;
            top: 0;
            right: 0;
            bottom: 0;
            width: 100%;
            height: 100%;
        }

        .slider__text {
            position: absolute;
            top: 50%;
            left: calc(2rem + 3vw);
            transform: translateY(-50%);
            z-index: 10;
            font-size: calc(1rem + 4vw);
            text-transform: uppercase;
            line-height: 1.075;
            color: #fff;
            font-weight: 500;
            font-family: 'Roboto', sans-serif;
            pointer-events: none;
        }

        .slider__text-line {
            overflow: hidden;
        }

        .slider__inner {
            position: absolute;
            left: 0;
            top: 0;
            right: 0;
            bottom: 0;
        }

        .slider__nav {
            position: absolute;
            top: 50%;
            right: 5vw;
            transform: translateY(-50%);
            z-index: 10;
            cursor: pointer;
        }

        .slider-bullet {
            display: flex;
            align-items: center;
            padding: 1rem 0;
        }

        .slider-bullet__text {
            color: #fff;
            font-size: 0.65rem;
            margin-right: 1rem;
        }

        .slider-bullet__line {
            background-color: #fff;
            height: 1px;
            width: 1rem;
        }

        .slider canvas {
            position: absolute;
            left: 0;
            top: 0;
            right: 0;
            bottom: 0;
            filter: blur(8px) brightness(0.9);
            transform: scale(1.1);
            /* Scale up slightly to hide blurred edges */
        }

        .slide {
            position: absolute;
            left: 0;
            top: 0;
            right: 0;
            bottom: 0;
            overflow: hidden;
            opacity: 0;
            /* Hidden by default, JS handles it */
            visibility: hidden;
        }

        .slide__content {
            display: flex;
            align-items: center;
            justify-content: center;
            position: absolute;
            left: 0;
            top: 0;
            right: 0;
            bottom: 0;
        }

        .slide__img {
            position: relative;
            width: 25vw;
            height: 70vh;
            padding: 0;
            margin: 0;
            min-width: 12.5rem;
            transform-origin: top;
        }

        .slide__img:first-child {
            top: -1.5rem;
            margin-right: 2rem;
        }

        .slide__img:last-child {
            bottom: -1.5rem;
        }

        .slide__img img {
            display: block;
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .scroll.js-scroll {
            position: absolute;
            bottom: 2rem;
            left: 50%;
            transform: translateX(-50%);
            color: rgba(255, 255, 255, 0.5);
            font-family: 'Urbanist', sans-serif;
            font-size: 0.8rem;
            z-index: 10;
            text-transform: uppercase;
        }
        /* --- MOBILE ERASER FIXES --- */
#hero-canvas {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%; 
    height: 100%;
    z-index: 5; 
    touch-action: none; /* VITAL: Stops mobile scrolling */
    user-select: none;  /* Prevents highlighting */
    -webkit-user-select: none;
}
 
.hero__video {
    z-index: 1;
}
    </style>


</head>
<script>
    document.addEventListener("DOMContentLoaded", () => {
        const canvas = document.getElementById('hero-canvas');
        if (!canvas) return;

        const ctx = canvas.getContext('2d');
        let isDrawing = false;

        // --- 1. SETUP CANVAS WITH HIGH-DPI SUPPORT ---
        const initCanvas = () => {
            const dpr = window.devicePixelRatio || 1;
            const rect = canvas.getBoundingClientRect();

            // Set actual size in memory (scaled to account for extra pixels)
            canvas.width = rect.width * dpr;
            canvas.height = rect.height * dpr;

            // Normalize coordinate system to use css pixels
            ctx.scale(dpr, dpr);

            // Fill with White
            ctx.globalCompositeOperation = 'source-over';
            ctx.fillStyle = '#ffffff';
            ctx.fillRect(0, 0, rect.width, rect.height);

            // Switch to Eraser Mode
            ctx.globalCompositeOperation = 'destination-out';
            
            console.log("Canvas Initialized. DPR:", dpr);
        };

        // --- 2. THE DRAWING FUNCTION ---
        const draw = (e) => {
            // Prevent default behavior (scrolling)
            if (e.cancelable) e.preventDefault();

            // Get correct coordinates
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;

            ctx.beginPath();
            // Brush size: 60px for mobile, 100px for desktop
            const radius = window.innerWidth < 768 ? 50 : 100;
            ctx.arc(x, y, radius, 0, Math.PI * 2);
            ctx.fill();
        };

        // --- 3. UNIFIED POINTER EVENTS (Works for Mouse & Touch) ---
        
        // Start drawing
        canvas.addEventListener('pointerdown', (e) => {
            isDrawing = true;
            canvas.setPointerCapture(e.pointerId); // Keeps tracking even if finger leaves element bounds
            draw(e);
        });

        // Draw while moving
        canvas.addEventListener('pointermove', (e) => {
            if (isDrawing) draw(e);
        });

        // Stop drawing
        canvas.addEventListener('pointerup', (e) => {
            isDrawing = false;
            canvas.releasePointerCapture(e.pointerId);
        });

        // Run initialization
        initCanvas();

        // Handle resize (Wait 200ms after resize stops to prevent lag)
        let resizeTimeout;
        window.addEventListener('resize', () => {
            clearTimeout(resizeTimeout);
            resizeTimeout = setTimeout(initCanvas, 200);
        });
    });
</script>
<body class="is-loading">

    <canvas id="global-cursor-canvas"></canvas>

    <model-viewer id="marker-3d-canvas" src="office-decor-organiser-pen/source/office_decor_organiser_pen (1).glb"
        alt="3D Marker Pen" auto-rotate camera-controls disable-zoom shadow-intensity="1"
        style="width: 80vh; height: 80vh;">
    </model-viewer>
    <section class="loader-screen">
        <div class="loader-content">
            <div class="willem__h1">
                <div class="willem__h1-start">
                    <span class="willem__letter">M</span>
                    <span class="willem__letter">A</span>
                    <span class="willem__letter">R</span>
                </div>
                <div class="willem-loader__box">
                    <div class="willem-loader__box-inner">
                        <div class="willem__growing-image">
                            <div class="willem__growing-image-wrap">
                                <img class="willem__cover-image-extra is--1" src="marker1.jpg" loading="lazy" alt="">
                                <img class="willem__cover-image-extra is--2" src="marker2.jpeg" loading="lazy" alt="">
                                <img class="willem__cover-image-extra is--3" src="marker3.webp" loading="lazy" alt="">
                                <img class="willem__cover-image" src='whitee.png' loading="lazy" alt="">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="willem__h1-end">
                    <span class="willem__letter">K</span>
                    <span class="willem__letter">E</span>
                    <span class="willem__letter">R</span>
                </div>
            </div>
        </div>
    </section>

    <div class="wrapper">
        <header class="header fade" data-fls-header="" data-fls-header-scroll="" data-fls-header-scroll-show="">
            <div class="header__container">
                <div class="header__menu menu">
                    <h1 class="logo">
                        <a href="#">MARKER</a>
                    </h1>
                </div>
            </div>
        </header>

        <main class="page page--home">

            <section class="hero">
                <video class="hero__video" src="./files/banner-hero.mov" autoplay muted loop playsinline=""></video>
                <canvas class="hero__canvas" id="hero-canvas"></canvas>
                <h1 class="hero__title" data-fls-watcher="" data-fls-watcher-once="">
                    <span>MARKER</span>
                </h1>
            </section>
            <section id="urbanist-integration">
                <svg class="urbanist-bg" width="100%" viewBox="0 0 1920 1300" fill="none"
                    xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none">
                    <rect width="1920" height="1300" fill="url(#gradient)"></rect>
                    <defs>
                        <linearGradient id="gradient" x1="1300.54" y1="201.621" x2="959.727" y2="841.863"
                            gradientUnits="userSpaceOnUse">
                            <stop offset="0.15" stop-color="var(--theme-sub-bg)" stop-opacity="1"></stop>
                            <stop offset="0.85" stop-color="var(--theme-main-bg)"></stop>
                        </linearGradient>
                    </defs>
                </svg>

                <div class="content-layer">
                    <h1>Marker</h1>
                    <p class="desc-1">
                        The Marker font captures the spontaneous energy and look of a broad-tipped permanent
                        marker, offering a bold and authentic hand-drawn aesthetic for digital interfaces.
                    </p>
                    <p class="desc-2">
                        Characterized by its irregular edges, organic flow, and varying stroke weights, it
                        breaks away from rigid digital grids to deliver a raw, human touch.
                    </p>
                    <p class="desc-3">
                        Ideal for impactful headlines and creative overlays, this typeface transforms
                        standard typography into expressive, attention-grabbing visual statements.
                    </p>
                </div>

                <div id="panes-container">
                    <div class="pane">
                        <img class="urbanist-floating-img" src="blue.png" alt="Marker design inspiration 1">
                    </div>
                    <div class="pane">
                        <img class="urbanist-floating-img" src="orange.png" alt="Marker design inspiration 2">
                    </div>
                    <div class="pane">
                        <img class="urbanist-floating-img" src="green.png" alt="Marker design inspiration 3">
                    </div>
                </div>
            </section>
            <section id="grid-scroll-wrapper">
                <section style="margin-bottom: -200px;" class="section-stick">
                    <p class="opacity-reveal reveal-text-style">
                        If youre bold, a single marker stroke will break the grid, steal the show, and change
                        everything.
                    </p>
                </section>
            </section>
            <div id="alice-wrapper">
                <section class="intro">
                    <h1 class="intro__heading">The Permanent Marker's<br />Bold Revolution</h1>
                </section>
                <section class="content">
                    <article class="article">
                        <h4><b>Red Marker (Highest Priority)</b></h4>
                        <p>
                            RED is the most attention-grabbing marker colour. It represents urgency, danger, and high
                            importance,
                            making it ideal for warnings and critical highlights.
                        </p>
                        <p>
                            Its strong visual impact ensures immediate focus, so it is used carefully and with clear
                            intention.
                        </p>

                        <h4><b>Black Marker</b></h4>
                        <p>
                            BLACK symbolizes clarity and authority. It is widely used for writing, outlining, and clear
                            communication due to its high readability.
                        </p>
                        <p>
                            Because of its professional appearance, black is preferred for formal and final work.
                        </p>

                        <h4><b>Blue Marker</b></h4>
                        <p>
                            BLUE represents trust and calmness. It is commonly used for general writing and explanations
                            without creating visual stress.
                        </p>
                        <p>
                            This colour is suitable for notes and planning where balance and clarity are needed.
                        </p>

                        <h4><b>Green Marker (Lowest Priority)</b></h4>
                        <p>
                            GREEN stands for positivity and approval. It is often used to show correctness or progress.
                        </p>
                        <p>
                            With lower urgency, green works best for supportive and secondary highlights.
                        </p>
                    </article>
                </section>
                <div class="hero-reveal-wrapper">
                    <section class="hero-reveal">
                        <article>
                            <header class="hero-reveal__header">
                                <div class="hero-reveal_split">
                                    <div class="hero-reveal_split_item">
                                        <p>PERFECT INK</p>
                                    </div>
                                    <div class="hero-reveal_split_item" aria-hidden="true">
                                        <p aria-hidden="true">PERFECT INK</p>
                                    </div>
                                </div>
                            </header>

                            <div class="hero-reveal__content">
                                <div class="hero-reveal__content-inner">
                                    <div class="hero-reveal__parallax">
                                        <img src="https://assets.codepen.io/204808/alice-falling-1.png" alt="Alice"
                                            class="hero-reveal__parallax-alice" />
                                        <img width="150" src="https://assets.codepen.io/204808/alice-falling-clock.png"
                                            alt="Clock" class="hero-reveal__parallax-clock" />
                                        <img width="100" src="https://assets.codepen.io/204808/alice-falling-book.png"
                                            alt="Book" class="hero-reveal__parallax-book" />
                                        <img width="50" src="https://assets.codepen.io/204808/alice-falling-kattle.png"
                                            alt="Kattle" class="hero-reveal__parallax-kattle" />
                                        <img width="330" src="https://assets.codepen.io/204808/alice-falling-card.png"
                                            alt="Card" class="hero-reveal__parallax-card" />
                                    </div>

                                    <div class="hero-reveal__content-p">
                                        <p>
                                            <B>The ink of the marker</B> flowed with confidence, bold and consistent,
                                            leaving
                                            behind a stroke that felt
                                            <B>permanent and intentional</B>. It dried quickly on the surface, resisting
                                            smudges, while the pigment
                                            settled deep into the material, giving the line its strong and lasting
                                            presence.
                                        </p>
                                        <p>
                                            As the marker moved, the ink revealed its character  rich in color,
                                            balanced in density, and smooth
                                            in motion. Each stroke carried clarity, allowing ideas to take shape without
                                            interruption or loss
                                            of control.
                                        </p>
                                        <p>
                                            Unlike ordinary pens, marker ink is designed to command attention. Its
                                            formulation blends pigments
                                            and solvents carefully, ensuring even coverage while maintaining durability
                                            across different
                                            surfaces and textures.
                                        </p>
                                        <p>
                                            <B>This is not just ink,</B> the creator realized, <B>it is expression
                                                itself.</B>
                                            With every line drawn, the
                                            marker transformed thought into form, leaving marks that spoke with
                                            strength, precision, and purpose.
                                        </p>
                                    </div>

                                </div>
                            </div>
                        </article>
                    </section>
                </div>
                <section class="content">
                    <article class="article">
                        <h4><b>Impact</b></h4>
                        <p>
                            Marker ink is designed to produce strong, high-contrast lines that remain clearly visible on
                            a
                            variety of surfaces. Its fast-drying nature reduces smudging and allows users to work
                            quickly
                            without interruption, especially in professional and creative environments.
                        </p>
                        <p>
                            The consistent flow of marker ink helps define shapes and outlines with precision. Once
                            applied,
                            the ink penetrates the surface fibers, making corrections difficult and encouraging
                            confident,
                            deliberate strokes.
                        </p>
                        <p>
                            Due to its high pigment concentration, marker ink resists fading over time. This makes it
                            suitable
                            for signage, illustrations, and notes that require long-lasting visibility.
                        </p>

                        <h4><b>Legacy</b></h4>
                        <p>
                            Markers have become essential tools across education, design, and industry. Their
                            reliability and
                            ease of use have made them a standard choice for communication, planning, and visual
                            expression.
                        </p>
                        <p>
                            Over time, advancements in ink formulationsuch as alcohol-based and water-based inkshave
                            improved
                            durability, color richness, and environmental safety, ensuring markers remain relevant and
                            widely
                            used.
                        </p>
                    </article>
                </section>
            </div>
            <section class="viewport-section intro-viewport">
                <div class="content-wrapper">
                    <h1>A creative marker built for clarity, control, and expression.</h1>
                </div>
            </section>
            <section class="viewport-section narrative-segment scroll-sequence-host">
                <div class="content-wrapper">
                    <div class="kinetic-typography-block">
                        <p>
                            Marker is designed as a focused tool for creators who value precision
                            and intention. Every stroke carries meaning, and every interaction is
                            crafted to feel natural, responsive, and purposeful.
                        </p>
                        <p>
                            More than a simple tool, Marker adapts to your workflow. It gives you
                            control over form, movement, and structure while staying effortless
                            to use. From quick ideas to refined details, Marker supports the way
                            you think and create.
                        </p>
                    </div>
                </div>
            </section>
            <section class="viewport-section action-trigger-zone">
                <div class="content-wrapper">
                    <h1>Create with confidence using Markers powerful tools.</h1>
                </div>
            </section>
            <section class="viewport-section capabilities-segment scroll-sequence-host">
                <div class="content-wrapper">
                    <div class="kinetic-typography-block">
                        <p>
                            Marker offers smooth interactions, adaptive precision, and intelligent
                            responsiveness in every feature. Whether you are highlighting ideas,
                            shaping concepts, or guiding attention, Marker reacts instantly and
                            accurately to your intent.
                        </p>
                        <p>
                            With optimized performance, flexible controls, and real-time feedback,
                            Marker transforms simple actions into expressive outcomes. It is built
                            to stay out of your way while enhancing every moment of creation.
                        </p>
                    </div>
                </div>
            </section>
            <section class="viewport-section conclusion-viewport">
                <div class="content-wrapper">
                    <h1>Marker empowers creators to define ideas with purpose.</h1>
                </div>
            </section>

            <footer id="advanced-footer">
                <canvas id="footer-canvas"></canvas>
                <div class="footer-content">
                    <div class="footer-left">
                        <h2 class="footer-big-text">Marker<br>Digital.</h2>
                        <div style="font-size: 0.9rem; opacity: 0.6; margin-top: auto;"> 2025 All Rights Reserved.
                        </div>
                    </div>
                    <div class="footer-right">
                        <div class="footer-links">
                            <ul>
                                <li><a href="#">Work</a></li>
                                <li><a href="#">Studio</a></li>
                                <li><a href="#">News</a></li>
                            </ul>
                            <ul>
                                <li><a href="#">Instagram</a></li>
                                <li><a href="#">Twitter</a></li>
                                <li><a href="#">LinkedIn</a></li>
                            </ul>
                        </div>
                        <div class="footer-bottom">
                            <span>Kochi, India</span>
                            <span>Scroll to top </span>
                        </div>
                    </div>
                </div>
            </footer>

        </main>
    </div>

    <script type="module">
        import { animate, scroll, cubicBezier } from 'https://cdn.jsdelivr.net/npm/motion@11.11.16/+esm';

        window.addEventListener('load', () => {
            const image = document.querySelector('.gs-scaler img');
            const track = document.querySelector('.gs-track');
            const layers = document.querySelectorAll('.gs-grid > .gs-layer');

            if (!image || !track) return;

            // Measure sizes
            const naturalWidth = image.offsetWidth;
            const naturalHeight = image.offsetHeight;
            const viewportWidth = window.innerWidth;
            const viewportHeight = window.innerHeight;

            // 1. Animate the center image (Shrink from full screen to grid size)
            scroll(
                animate(image, {
                    width: [`${viewportWidth}px`, `${naturalWidth}px`],
                    height: [`${viewportHeight}px`, `${naturalHeight}px`],
                    borderRadius: ['0px', '8px']
                }, {
                    width: { easing: cubicBezier(0.65, 0, 0.35, 1) },
                    height: { easing: cubicBezier(0.42, 0, 0.58, 1) },
                    borderRadius: { easing: cubicBezier(0.65, 0, 0.35, 1) }
                }),
                {
                    target: track,
                    offset: ['start start', '80% end']
                }
            );

            // 2. Animate the surrounding layers (Fade in and scale up)
            const scaleEasings = [
                cubicBezier(0.42, 0, 0.58, 1), // Layer 1
                cubicBezier(0.76, 0, 0.24, 1), // Layer 2
                cubicBezier(0.87, 0, 0.13, 1)  // Layer 3
            ];

            layers.forEach((layer, index) => {
                // Stagger the end offsets slightly
                const endOffset = `${0.9 - (index * 0.05)} end`;

                // Opacity Animation
                scroll(
                    animate(layer, { opacity: [0, 0, 1] }, {
                        offset: [0, 0.5, 1],
                        easing: cubicBezier(0.61, 1, 0.88, 1)
                    }),
                    {
                        target: track,
                        offset: ['start start', 'end end']
                    }
                );

                // Scale Animation
                scroll(
                    animate(layer, { scale: [0, 0, 1] }, {
                        offset: [0, 0.3, 1],
                        easing: scaleEasings[index] || scaleEasings[0]
                    }),
                    {
                        target: track,
                        offset: ['start start', 'end end']
                    }
                );
            });
        });
    </script>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            gsap.registerPlugin(ScrollTrigger);

            const lenis = new Lenis();
            lenis.on("scroll", ScrollTrigger.update);
            gsap.ticker.add((time) => {
                lenis.raf(time * 1000);
            });
            gsap.ticker.lagSmoothing(0);

            // Updated Selector
            const textBlocks = document.querySelectorAll(".kinetic-typography-block p");

            // Updated RGB value for the lighter background highlight (a slate blue tone)
            const wordHighlightRGB = "45, 59, 85";

            const specialKeywords = [
                "designed",
                "natural",
                "control",
                "ideas",
                "smooth",
                "performance",
                "creation",
                "attention",
                "value",
            ];

            textBlocks.forEach((paragraph) => {
                const textContent = paragraph.textContent;
                const splitWords = textContent.split(/\s+/);
                paragraph.innerHTML = "";

                splitWords.forEach((wordStr) => {
                    if (wordStr.trim()) {
                        const tokenContainer = document.createElement("div");
                        // Updated Class Name
                        tokenContainer.className = "token-unit";

                        const innerSpan = document.createElement("span");
                        innerSpan.textContent = wordStr;

                        const cleanWord = wordStr.toLowerCase().replace(/[.,!?;:"]/g, "");

                        if (specialKeywords.includes(cleanWord)) {
                            // Updated Class Names
                            tokenContainer.classList.add("highlight-anchor");
                            innerSpan.classList.add("emphasis-pill", cleanWord);
                        }

                        tokenContainer.appendChild(innerSpan);
                        paragraph.appendChild(tokenContainer);
                    }
                });
            });

            // Updated Selector
            const scrollHosts = document.querySelectorAll(".scroll-sequence-host");

            scrollHosts.forEach((hostEl) => {
                ScrollTrigger.create({
                    trigger: hostEl,
                    pin: hostEl,
                    start: "top top",
                    end: `+=${window.innerHeight * 4}`,
                    pinSpacing: true,
                    onUpdate: (self) => {
                        const progress = self.progress;
                        // Updated Selector
                        const allTokens = Array.from(
                            hostEl.querySelectorAll(".kinetic-typography-block .token-unit")
                        );
                        const totalTokens = allTokens.length;

                        allTokens.forEach((token, idx) => {
                            const innerText = token.querySelector("span");

                            if (progress <= 0.7) {
                                // Reveal Phase
                                const progressTarget = 0.7;
                                const revealProgress = Math.min(1, progress / progressTarget);

                                const overlapCount = 15;
                                const animLength = 1 + overlapCount / totalTokens;

                                const startP = idx / totalTokens;
                                const endP = startP + overlapCount / totalTokens;

                                const timeScale = 1 / Math.min(
                                    animLength,
                                    1 + (totalTokens - 1) / totalTokens + overlapCount / totalTokens
                                );

                                const adjStart = startP * timeScale;
                                const adjEnd = endP * timeScale;
                                const duration = adjEnd - adjStart;

                                const tokenProgress = revealProgress <= adjStart
                                    ? 0
                                    : revealProgress >= adjEnd
                                        ? 1
                                        : (revealProgress - adjStart) / duration;

                                token.style.opacity = tokenProgress;

                                // Background Highlight Logic
                                const bgFadeStart = tokenProgress >= 0.9 ? (tokenProgress - 0.9) / 0.1 : 0;
                                const bgOpacity = Math.max(0, 1 - bgFadeStart);
                                token.style.backgroundColor = `rgba(${wordHighlightRGB}, ${bgOpacity})`;

                                // Text Opacity Logic
                                const textThreshold = 0.9;
                                const textRevealP = tokenProgress >= textThreshold
                                    ? (tokenProgress - textThreshold) / (1 - textThreshold)
                                    : 0;

                                innerText.style.opacity = Math.pow(textRevealP, 0.5);

                            } else {
                                // Exit Phase (Reverse/Fade)
                                const reverseProgress = (progress - 0.7) / 0.3;
                                token.style.opacity = 1;
                                const targetOpacity = 1;

                                const revOverlap = 5;
                                const revStart = idx / totalTokens;
                                const revEnd = revStart + revOverlap / totalTokens;

                                const revScale = 1 / Math.max(
                                    1,
                                    (totalTokens - 1) / totalTokens + revOverlap / totalTokens
                                );

                                const revAdjStart = revStart * revScale;
                                const revAdjEnd = revEnd * revScale;
                                const revDur = revAdjEnd - revAdjStart;

                                const revTokenP = reverseProgress <= revAdjStart
                                    ? 0
                                    : reverseProgress >= revAdjEnd
                                        ? 1
                                        : (reverseProgress - revAdjStart) / revDur;

                                if (revTokenP > 0) {
                                    innerText.style.opacity = targetOpacity * (1 - revTokenP);
                                    token.style.backgroundColor = `rgba(${wordHighlightRGB}, ${revTokenP})`;
                                } else {
                                    innerText.style.opacity = targetOpacity;
                                    token.style.backgroundColor = `rgba(${wordHighlightRGB}, 0)`;
                                }
                            }
                        });
                    },
                });
            });
        });
    </script>
    <script>
        gsap.registerPlugin(ScrollTrigger);

        // --- 0. LOADER ANIMATION (OSMO/WILLEM) ---
        function initLoader() {
            const container = document.querySelector('.loader-screen');
            const loadingLetter = container.querySelectorAll('.willem__letter');
            const box = container.querySelectorAll('.willem-loader__box');
            const growingImage = container.querySelectorAll('.willem__growing-image');
            const headingStart = container.querySelectorAll('.willem__h1-start');
            const headingEnd = container.querySelectorAll('.willem__h1-end');
            const coverImageExtra = container.querySelectorAll('.willem__cover-image-extra');

            const tl = gsap.timeline({
                defaults: { ease: 'expo.inOut' },
                onComplete: () => {
                    document.body.classList.remove('is-loading');
                    gsap.to(container, {
                        opacity: 0,
                        display: 'none',
                        duration: 0.5,
                        onComplete: () => ScrollTrigger.refresh()
                    });
                }
            });

            if (loadingLetter) { tl.from(loadingLetter, { yPercent: 100, stagger: 0.025, duration: 1.25 }); }
            if (box.length) { tl.fromTo(box, { width: '0em' }, { width: '1em', duration: 1.25 }, '< 1.25'); }
            if (growingImage.length) { tl.fromTo(growingImage, { width: '0%' }, { width: '100%', duration: 1.25 }, '<'); }
            if (headingStart.length) { tl.fromTo(headingStart, { x: '0em' }, { x: '-0.05em', duration: 1.25 }, '<'); }
            if (headingEnd.length) { tl.fromTo(headingEnd, { x: '0em' }, { x: '0.05em', duration: 1.25 }, '<'); }
            if (coverImageExtra.length) { tl.fromTo(coverImageExtra, { opacity: 1 }, { opacity: 0, duration: 0.05, ease: 'none', stagger: 0.5 }, '-=0.05'); }
            if (growingImage.length) { tl.to(growingImage, { width: '100vw', height: '100vh', duration: 1.5 }, '< 1.25'); }
            if (box.length) { tl.to(box, { width: '100vw', duration: 1.5 }, '<'); }
        }

        document.addEventListener('DOMContentLoaded', () => {
            initLoader();
            initCarousel();
            initGlobalPageCursor();
            initFooterCursor();
            initFooterAnimations();
        });

        // --- GLOBAL PAGE CURSOR ANIMATION (NEW FUNCTION) ---
        function initGlobalPageCursor() {
            const globalCanvas = document.querySelector('#global-cursor-canvas');
            if (!globalCanvas) return;

            const globalCtx = globalCanvas.getContext('2d');
            let globalMouseMoved = false;

            const globalPointer = {
                x: 0.5 * window.innerWidth,
                y: 0.5 * window.innerHeight,
            };

            const params = {
                pointsNumber: 40,
                widthFactor: 0.3,
                mouseThreshold: 0.6,
                spring: 0.4,
                friction: 0.5,
            };

            const trail = new Array(params.pointsNumber);
            for (let i = 0; i < params.pointsNumber; i++) {
                trail[i] = {
                    x: globalPointer.x,
                    y: globalPointer.y,
                    dx: 0,
                    dy: 0,
                };
            }

            window.addEventListener('click', e => {
                updateGlobalMousePosition(e.clientX, e.clientY);
            });
            window.addEventListener('mousemove', e => {
                globalMouseMoved = true;
                updateGlobalMousePosition(e.clientX, e.clientY);
            });
            window.addEventListener('touchmove', e => {
                globalMouseMoved = true;
                updateGlobalMousePosition(e.targetTouches[0].clientX, e.targetTouches[0].clientY);
            });

            function updateGlobalMousePosition(eX, eY) {
                globalPointer.x = eX;
                globalPointer.y = eY;
            }

            function setupGlobalCanvas() {
                globalCanvas.width = window.innerWidth;
                globalCanvas.height = window.innerHeight;
            }

            function updateGlobal(t) {
                // Idle motion when mouse isn't moving
                if (!globalMouseMoved) {
                    globalPointer.x = (0.5 + 0.3 * Math.cos(0.002 * t) * Math.sin(0.005 * t)) * window.innerWidth;
                    globalPointer.y = (0.5 + 0.2 * Math.cos(0.005 * t) + 0.1 * Math.cos(0.01 * t)) * window.innerHeight;
                }

                globalCtx.clearRect(0, 0, globalCanvas.width, globalCanvas.height);

                trail.forEach((p, pIdx) => {
                    const prev = pIdx === 0 ? globalPointer : trail[pIdx - 1];
                    const spring = pIdx === 0 ? 0.4 * params.spring : params.spring;
                    p.dx += (prev.x - p.x) * spring;
                    p.dy += (prev.y - p.y) * spring;
                    p.dx *= params.friction;
                    p.dy *= params.friction;
                    p.x += p.dx;
                    p.y += p.dy;
                });

                globalCtx.lineCap = 'round';
                // Set color to white because we used mix-blend-mode: difference in CSS
                // This makes it look inverted on all backgrounds
                globalCtx.strokeStyle = '#ffffff';

                globalCtx.beginPath();
                globalCtx.moveTo(trail[0].x, trail[0].y);

                for (let i = 1; i < trail.length - 1; i++) {
                    const xc = 0.5 * (trail[i].x + trail[i + 1].x);
                    const yc = 0.5 * (trail[i].y + trail[i + 1].y);
                    globalCtx.quadraticCurveTo(trail[i].x, trail[i].y, xc, yc);
                    globalCtx.lineWidth = params.widthFactor * (params.pointsNumber - i);
                    globalCtx.stroke();
                }
                globalCtx.lineTo(trail[trail.length - 1].x, trail[trail.length - 1].y);
                globalCtx.stroke();

                window.requestAnimationFrame(updateGlobal);
            }

            window.addEventListener('resize', setupGlobalCanvas);

            // Initialize
            setupGlobalCanvas();
            updateGlobal(0);
        }

        // --- 1. URBANIST LOGIC ---
        const integrationSection = document.getElementById("urbanist-integration");
        const panes = gsap.utils.toArray(".pane");
        gsap.set(panes, { width: window.innerWidth });

        const themes = [
            { mainBg: "#b9dcff", subBg: "#f2fbfe", text: "#070f36", title: "#8dc9f4" },
            { mainBg: "#fff58c", subBg: "#fbf1ed", text: "#9c4e23", title: "#9c4e23" },
            { mainBg: "#c4ffb2", subBg: "#f1ffec", text: "#164c3b", title: "#164c3b" }
        ];

        const thresholds = new Array(panes.length).fill(0).map((_, i) => parseFloat(((1 / panes.length) * i).toFixed(2)));
        let activeThemeIndex = 0;

        gsap.to(panes, {
            xPercent: -100 * (panes.length - 1),
            ease: "none",
            scrollTrigger: {
                trigger: integrationSection,
                pin: true,
                scrub: 1,
                start: "top top",
                end: () => "+=" + (window.innerWidth * panes.length * 0.5),
                onUpdate: (self) => {
                    const progress = parseFloat(self.progress.toFixed(2));
                    const themeIndex = thresholds.findLastIndex((threshold) => progress >= threshold);
                    if (themeIndex !== activeThemeIndex && themeIndex >= 0) {
                        activeThemeIndex = themeIndex;
                        updateTheme(themeIndex);
                    }
                }
            }
        });

        function updateTheme(themeIndex) {
            const theme = themes[themeIndex];
            gsap.to(document.documentElement, {
                "--theme-main-bg": theme.mainBg,
                "--theme-sub-bg": theme.subBg,
                "--theme-title": theme.title,
                "--theme-text": theme.text,
                duration: 1,
                ease: "power2.out"
            });
        }

        // --- 2. PERSPECTIVE ZOOM LOGIC ---
        const zoomTimeline = gsap.timeline({
            scrollTrigger: {
                trigger: ".zoom-container",
                start: "top top",
                end: "+=200%",
                scrub: 1,
                pin: true
            }
        });
        zoomTimeline.to(".zoom-item[data-layer='3']", { z: 1000, opacity: 0, ease: "power1.in" }, 0);
        zoomTimeline.to(".zoom-item[data-layer='2']", { z: 600, opacity: 0, ease: "power1.in" }, 0.1);
        zoomTimeline.to(".zoom-item[data-layer='1']", { z: 300, opacity: 0, ease: "power1.in" }, 0.2);
        zoomTimeline.to(".heading-zoom", { z: 200, opacity: 1, scale: 1.5, ease: "power1.out" }, 0);

        // --- 3. TEXT REVEAL LOGIC ---
        const textElement = document.querySelector(".opacity-reveal");
        const textContent = textElement.innerText;
        textElement.innerHTML = '';
        textContent.split('').forEach(char => {
            const span = document.createElement('span');
            span.innerText = char;
            span.style.opacity = "0.1";
            textElement.appendChild(span);
        });
        const chars = textElement.querySelectorAll('span');
        const textTimeline = gsap.timeline({
            scrollTrigger: {
                trigger: ".section-stick",
                start: "center center",
                end: "+=150%",
                pin: true,
                scrub: 0.5
            }
        });
        textTimeline.to(chars, { opacity: 1, stagger: 0.02, duration: 1, ease: "none" })
            .to(textElement, { scale: 1.1, duration: 1, ease: "power2.out" }, "<");

        // --- 4. ALICE SECTION LOGIC ---
        const heroReveal = document.querySelectorAll(".hero-reveal");
        heroReveal.forEach((element) => {
            const heroBox = element.querySelector(".hero-reveal__header");
            const heroHeadings = element.querySelectorAll(".hero-reveal_split_item");
            const contentEl = element.querySelector(".hero-reveal__content");
            if (!heroBox || !contentEl) return;
            const heroBoxHeight = heroBox.offsetHeight;
            const contentHeight = contentEl.offsetHeight;
            const pinDistance = heroBoxHeight > contentHeight ? heroBoxHeight : contentHeight;

            gsap.fromTo(contentEl, { y: "50%" }, {
                y: "0%", ease: "none",
                scrollTrigger: { trigger: element, start: "top top", end: `+=${pinDistance}`, scrub: true }
            });

            const tl = gsap.timeline({ scrollTrigger: { trigger: element, start: "top top", end: `+=${pinDistance}`, scrub: true, pin: true } });
            tl.fromTo(heroBox, { clipPath: "inset(0% 0% 0% 0%)" }, { clipPath: "inset(0% 0% 100% 0%)", duration: 1, ease: "power1.inOut" });

            if (heroHeadings.length >= 2) {
                tl.fromTo(heroHeadings[0], { y: "0%" }, { y: "-30%", ease: "power1.inOut" }, 0);
                tl.fromTo(heroHeadings[1], { y: "0%" }, { y: "30%", ease: "power1.inOut" }, 0);
            }
        });

        function parallaxScrollBySpeed(selector, speed = 1, trigger = ".hero-reveal") {
            const el = document.querySelector(selector);
            const contentEl = document.querySelector(".hero-reveal__content");
            if (!el || !contentEl) return;
            const contentHeight = contentEl.offsetHeight;
            gsap.to(el, {
                yPercent: (speed - 1) * 100, ease: "none",
                scrollTrigger: { trigger: trigger, start: "top top", end: `+=${contentHeight * 2}`, scrub: true }
            });
        }
        parallaxScrollBySpeed(".hero-reveal__parallax-book", 15);
        parallaxScrollBySpeed(".hero-reveal__parallax-clock", 13);
        parallaxScrollBySpeed(".hero-reveal__parallax-alice", 6);
        parallaxScrollBySpeed(".hero-reveal__parallax-kattle", 23);
        parallaxScrollBySpeed(".hero-reveal__parallax-card", 5);

        // --- 5. CAROUSEL SECTION LOGIC (FIXED & STABLE) ---
        function initCarousel() {
            // We pin the section for 4000px.
            // We use a timeline that is scrubbed by the scroll.
            // This allows smooth forward/backward scrubbing with no logic errors.

            const carouselSection = document.querySelector("#carousel-section");
            const slides = gsap.utils.toArray(".slide"); // Get all pre-rendered slides

            // Create a timeline that spans the pinning duration
            const tl = gsap.timeline({
                scrollTrigger: {
                    trigger: carouselSection,
                    start: "top top",
                    end: "+=4000",
                    scrub: 1, // Smooth scrubbing, user can reverse easily
                    pin: true
                }
            });
            // 1. Reveal Slide 2
            tl.to("#slide-2", {
                clipPath: "polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%)",
                duration: 1,
                ease: "none" // Linear ease for direct mapping to scroll
            });

            // 2. Reveal Slide 3
            tl.to("#slide-3", {
                clipPath: "polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%)",
                duration: 1,
                ease: "none"
            });

            // 3. Reveal Slide 4
            tl.to("#slide-4", {
                clipPath: "polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%)",
                duration: 1,
                ease: "none"
            });

            // Add a small buffer at the end so the user sees the last slide before unpinning
            tl.to({}, { duration: 0.5 });
        }

        // --- 6. FOOTER CURSOR LOGIC ---
        function initFooterCursor() {
            const canvas = document.querySelector('#footer-canvas');
            const footer = document.querySelector('#advanced-footer');
            if (!canvas || !footer) return;

            const ctx = canvas.getContext('2d');
            let mouseMoved = false;

            const pointer = { x: 0.5 * window.innerWidth, y: 0.5 * window.innerHeight };
            const params = {
                pointsNumber: 40,
                widthFactor: 0.3,
                mouseThreshold: 0.6,
                spring: 0.4,
                friction: 0.5,
            };

            const trail = new Array(params.pointsNumber);
            for (let i = 0; i < params.pointsNumber; i++) {
                trail[i] = { x: pointer.x, y: pointer.y, dx: 0, dy: 0 };
            }

            // Listen to movements on the FOOTER specifically to handle offsets correctly
            footer.addEventListener('mousemove', e => {
                mouseMoved = true;
                const rect = footer.getBoundingClientRect();
                // Calculate position relative to the footer canvas
                pointer.x = e.clientX - rect.left;
                pointer.y = e.clientY - rect.top;
            });

            // Also handle global window resizing
            window.addEventListener('resize', setupCanvas);

            function setupCanvas() {
                const rect = footer.getBoundingClientRect();
                canvas.width = rect.width;
                canvas.height = rect.height;
            }

            function update(t) {
                // If mouse hasn't moved yet, create a gentle idle animation
                if (!mouseMoved) {
                    pointer.x = (0.5 + 0.3 * Math.cos(0.002 * t) * Math.sin(0.005 * t)) * canvas.width;
                    pointer.y = (0.5 + 0.2 * Math.cos(0.005 * t) + 0.1 * Math.cos(0.01 * t)) * canvas.height;
                }

                ctx.clearRect(0, 0, canvas.width, canvas.height);

                trail.forEach((p, pIdx) => {
                    const prev = pIdx === 0 ? pointer : trail[pIdx - 1];
                    const spring = pIdx === 0 ? 0.4 * params.spring : params.spring;
                    p.dx += (prev.x - p.x) * spring;
                    p.dy += (prev.y - p.y) * spring;
                    p.dx *= params.friction;
                    p.dy *= params.friction;
                    p.x += p.dx;
                    p.y += p.dy;
                });

                ctx.lineCap = 'round';
                ctx.strokeStyle = '#ffffff'; // White trail on black footer
                ctx.beginPath();
                ctx.moveTo(trail[0].x, trail[0].y);

                for (let i = 1; i < trail.length - 1; i++) {
                    const xc = 0.5 * (trail[i].x + trail[i + 1].x);
                    const yc = 0.5 * (trail[i].y + trail[i + 1].y);
                    ctx.quadraticCurveTo(trail[i].x, trail[i].y, xc, yc);
                    ctx.lineWidth = params.widthFactor * (params.pointsNumber - i);
                    ctx.stroke();
                }
                ctx.lineTo(trail[trail.length - 1].x, trail[trail.length - 1].y);
                ctx.stroke();

                window.requestAnimationFrame(update);
            }

            setupCanvas();
            update(0);
        }

        // --- 7. FOOTER REVEAL ANIMATIONS ---
        function initFooterAnimations() {
            const footer = document.querySelector('#advanced-footer');
            const bigText = footer.querySelector('.footer-big-text');
            const links = footer.querySelectorAll('.footer-links a');
            const bottom = footer.querySelector('.footer-bottom');

            // Animate Big Text
            gsap.to(bigText, {
                opacity: 1,
                y: 0,
                duration: 1.5,
                ease: "power3.out",
                scrollTrigger: {
                    trigger: footer,
                    start: "top 75%",
                }
            });

            // Animate Links Stagger
            gsap.to(links, {
                y: 0,
                duration: 1,
                stagger: 0.1,
                ease: "power3.out",
                scrollTrigger: {
                    trigger: footer,
                    start: "top 75%",
                }
            });

            // Animate Bottom Bar
            gsap.to(bottom, {
                opacity: 1,
                duration: 1,
                delay: 0.5,
                scrollTrigger: {
                    trigger: footer,
                    start: "top 80%",
                }
            });
        }
    </script>
    <script type="module">
        import LiquidBackground from 'https://cdn.jsdelivr.net/npm/threejs-components@0.0.27/build/backgrounds/liquid1.min.js'

        const canvasElement = document.getElementById('liquid-canvas');
        if (canvasElement) {
            const app = LiquidBackground(canvasElement)

            // Load the image and set parameters
            app.loadImage('https://assets.codepen.io/33787/liquid.webp')
            app.liquidPlane.material.metalness = 0.75
            app.liquidPlane.material.roughness = 0.25
            app.liquidPlane.uniforms.displacementScale.value = 5
            app.setRain(false)
        }
    </script>
    <script>
        const modelViewer = document.querySelector('#marker-3d-canvas');

        if (modelViewer) {
            gsap.to(modelViewer, {
                opacity: 0,
                ease: "none",
                scrollTrigger: {
                    trigger: "#urbanist-integration", // Trigger when Section 3 hits viewport
                    start: "top bottom", // Start fading when section 3 top hits bottom of screen
                    end: "top center",   // Finish fading when section 3 top hits center
                    scrub: true
                }
            });
        }
    </script>
    <script>
        class Slider {
            constructor() {
                this.bindAll()

                // Shader code
                this.vert = `
    varying vec2 vUv;
    void main() {
      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
    }
    `

                this.frag = `
    varying vec2 vUv;
    uniform sampler2D texture1;
    uniform sampler2D texture2;
    uniform sampler2D disp;
    uniform float dispPower;
    uniform float intensity;
    void main() {
      vec2 uv = vUv;
      vec4 disp = texture2D(disp, uv);
      vec2 dispVec = vec2(disp.x, disp.y);
      vec2 distPos1 = uv + (dispVec * intensity * dispPower);
      vec2 distPos2 = uv + (dispVec * -(intensity * (1.0 - dispPower)));
      vec4 _texture1 = texture2D(texture1, distPos1);
      vec4 _texture2 = texture2D(texture2, distPos2);
      gl_FragColor = mix(_texture1, _texture2, dispPower);
    }
    `

                this.el = document.querySelector('.js-slider')
                this.inner = this.el.querySelector('.js-slider__inner')
                this.slides = [...this.el.querySelectorAll('.js-slide')]
                this.bullets = [...this.el.querySelectorAll('.js-slider-bullet')]

                this.renderer = null
                this.scene = null
                this.clock = null
                this.camera = null

                // YOUR OLD IMAGES MAPPED HERE FOR THE WEBGL TRANSITION
                this.images = [
                    'two.jpg',
                    'image2.webp',
                    'image3.jpg' // Ensure this path is correct relative to your HTML
                ]

                this.data = {
                    current: 0,
                    next: 1,
                    total: this.images.length - 1,
                    delta: 0
                }

                this.state = {
                    animating: false,
                    text: false,
                    initial: true
                }

                this.textures = null

                this.init()
            }

            bindAll() {
                ['render', 'nextSlide']
                    .forEach(fn => this[fn] = this[fn].bind(this))
            }

            setStyles() {
                this.slides.forEach((slide, index) => {
                    if (index === 0) return
                    gsap.set(slide, { autoAlpha: 0 })
                })

                this.bullets.forEach((bullet, index) => {
                    if (index === 0) return

                    const txt = bullet.querySelector('.js-slider-bullet__text')
                    const line = bullet.querySelector('.js-slider-bullet__line')

                    gsap.set(txt, { alpha: 0.25 })
                    gsap.set(line, { scaleX: 0, transformOrigin: 'left' })
                })
            }

            cameraSetup() {
                this.camera = new THREE.OrthographicCamera(
                    this.el.offsetWidth / -2,
                    this.el.offsetWidth / 2,
                    this.el.offsetHeight / 2,
                    this.el.offsetHeight / -2,
                    1,
                    1000
                )
                this.camera.lookAt(this.scene.position)
                this.camera.position.z = 1
            }

            setup() {
                this.scene = new THREE.Scene()
                this.clock = new THREE.Clock(true)

                this.renderer = new THREE.WebGLRenderer({ alpha: true })
                this.renderer.setPixelRatio(window.devicePixelRatio)
                this.renderer.setSize(this.el.offsetWidth, this.el.offsetHeight)

                this.inner.appendChild(this.renderer.domElement)
            }

            loadTextures() {
                const loader = new THREE.TextureLoader()
                loader.crossOrigin = ''

                this.textures = []
                this.images.forEach((image, index) => {
                    const texture = loader.load(image + '?v=' + Date.now(), this.render)
                    texture.minFilter = THREE.LinearFilter
                    texture.generateMipmaps = false

                    if (index === 0 && this.mat) {
                        this.mat.uniforms.size.value = [
                            texture.image.naturalWidth,
                            texture.image.naturalHeight
                        ]
                    }
                    this.textures.push(texture)
                })

                this.disp = loader.load('https://s3-us-west-2.amazonaws.com/s.cdpn.io/58281/rock-_disp.png', this.render)
                this.disp.magFilter = this.disp.minFilter = THREE.LinearFilter
                this.disp.wrapS = this.disp.wrapT = THREE.RepeatWrapping
            }

            createMesh() {
                this.mat = new THREE.ShaderMaterial({
                    uniforms: {
                        dispPower: { type: 'f', value: 0.0 },
                        intensity: { type: 'f', value: 0.5 },
                        res: { value: new THREE.Vector2(window.innerWidth, window.innerHeight) },
                        size: { value: new THREE.Vector2(1, 1) },
                        texture1: { type: 't', value: this.textures[0] },
                        texture2: { type: 't', value: this.textures[1] },
                        disp: { type: 't', value: this.disp }
                    },
                    transparent: true,
                    vertexShader: this.vert,
                    fragmentShader: this.frag
                })

                const geometry = new THREE.PlaneBufferGeometry(
                    this.el.offsetWidth,
                    this.el.offsetHeight,
                    1
                )

                const mesh = new THREE.Mesh(geometry, this.mat)
                this.scene.add(mesh)
            }

            transitionNext() {
                gsap.to(this.mat.uniforms.dispPower, {
                    duration: 2.5,
                    value: 1,
                    ease: "expo.inOut",
                    onUpdate: this.render,
                    onComplete: () => {
                        this.mat.uniforms.dispPower.value = 0.0
                        this.changeTexture()
                        this.render.bind(this)
                        this.state.animating = false
                    }
                })

                const current = this.slides[this.data.current]
                const next = this.slides[this.data.next]

                const currentImages = current.querySelectorAll('.js-slide__img')
                const nextImages = next.querySelectorAll('.js-slide__img')

                const currentText = current.querySelectorAll('.js-slider__text-line div')
                const nextText = next.querySelectorAll('.js-slider__text-line div')

                const currentBullet = this.bullets[this.data.current]
                const nextBullet = this.bullets[this.data.next]

                const currentBulletTxt = currentBullet.querySelectorAll('.js-slider-bullet__text')
                const nextBulletTxt = nextBullet.querySelectorAll('.js-slider-bullet__text')

                const currentBulletLine = currentBullet.querySelectorAll('.js-slider-bullet__line')
                const nextBulletLine = nextBullet.querySelectorAll('.js-slider-bullet__line')

                const tl = gsap.timeline({ paused: true })

                if (this.state.initial) {
                    gsap.to('.js-scroll', {
                        duration: 1.5,
                        yPercent: 100,
                        autoAlpha: 0,
                        ease: "power4.inOut"
                    })
                    this.state.initial = false
                }

                tl
                    .fromTo(currentImages, { yPercent: 0, scale: 1 }, {
                        duration: 1.5,
                        yPercent: -185,
                        scaleY: 1.5,
                        ease: "expo.inOut",
                        stagger: 0.075
                    })
                    .to(currentBulletTxt, {
                        duration: 1.5,
                        alpha: 0.25,
                        ease: "none"
                    }, 0)
                    .set(currentBulletLine, { transformOrigin: 'right' }, 0)
                    .to(currentBulletLine, {
                        duration: 1.5,
                        scaleX: 0,
                        ease: "expo.inOut"
                    }, 0)

                if (currentText) {
                    tl.fromTo(currentText, { yPercent: 0 }, {
                        duration: 2,
                        yPercent: -100,
                        ease: "power4.inOut"
                    }, 0)
                }

                tl
                    .set(current, { autoAlpha: 0 })
                    .set(next, { autoAlpha: 1 }, 1)

                if (nextText) {
                    tl.fromTo(nextText, { yPercent: 100 }, {
                        duration: 2,
                        yPercent: 0,
                        ease: "power4.out"
                    }, 1.5)
                }

                tl
                    .fromTo(nextImages, { yPercent: 150, scaleY: 1.5 }, {
                        duration: 1.5,
                        yPercent: 0,
                        scaleY: 1,
                        ease: "expo.inOut",
                        stagger: 0.075
                    }, 1)
                    .to(nextBulletTxt, {
                        duration: 1.5,
                        alpha: 1,
                        ease: "none"
                    }, 1)
                    .set(nextBulletLine, { transformOrigin: 'left' }, 1)
                    .to(nextBulletLine, {
                        duration: 1.5,
                        scaleX: 1,
                        ease: "expo.inOut"
                    }, 1)

                tl.play()
            }

            nextSlide() {
                if (this.state.animating) return
                this.state.animating = true
                this.transitionNext()
                this.data.current = this.data.current === this.data.total ? 0 : this.data.current + 1
                this.data.next = this.data.current === this.data.total ? 0 : this.data.current + 1
            }

            changeTexture() {
                this.mat.uniforms.texture1.value = this.textures[this.data.current]
                this.mat.uniforms.texture2.value = this.textures[this.data.next]
            }

            listeners() {
                // Only scroll when hovering inside the slider to avoid blocking page scroll
                this.el.addEventListener('wheel', (e) => {
                    // Simple throttle
                    if (!this.state.animating) {
                        this.nextSlide();
                    }
                }, { passive: true })

                this.el.addEventListener('click', this.nextSlide)
            }

            render() {
                this.renderer.render(this.scene, this.camera)
            }

            init() {
                this.setup()
                this.cameraSetup()
                this.loadTextures()
                this.createMesh()
                this.setStyles()
                this.render()
                this.listeners()
            }
        }

        // Init classes
        window.addEventListener('load', () => {
            const slider = new Slider()
        });
    </script>
    
</body>

</html>